<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Gesture UI Control</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<style>
  body {
    margin: 0;
    height: 100vh;
    transition: background 0.6s ease;
    background: linear-gradient(135deg, #111, #222);
    overflow: hidden;
  }

  /* camera hidden */
  video {
    display: none;
  }

  .info {
    position: fixed;
    bottom: 20px;
    width: 100%;
    text-align: center;
    color: #fff;
    font-size: 18px;
    opacity: 0.8;
  }
</style>
</head>

<body>

<video id="video" autoplay playsinline></video>
<div class="info">âœ‹ Slide hand LEFT / RIGHT</div>

<script>
const video = document.getElementById("video");
let lastX = null;

const colors = [
  "linear-gradient(135deg, #ff416c, #ff4b2b)",
  "linear-gradient(135deg, #2193b0, #6dd5ed)",
  "linear-gradient(135deg, #cc2b5e, #753a88)",
  "linear-gradient(135deg, #11998e, #38ef7d)",
  "linear-gradient(135deg, #fc466b, #3f5efb)"
];

let colorIndex = 0;

const hands = new Hands({
  locateFile: f => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${f}`
});

hands.setOptions({
  maxNumHands: 1,
  minDetectionConfidence: 0.7,
  minTrackingConfidence: 0.7
});

hands.onResults(results => {
  if (!results.multiHandLandmarks) return;

  const hand = results.multiHandLandmarks[0];
  const x = hand[9].x; // palm center

  if (lastX !== null) {
    const diff = x - lastX;

    if (diff > 0.04) {
      // swipe RIGHT
      colorIndex = (colorIndex + 1) % colors.length;
      document.body.style.background = colors[colorIndex];
      lastX = null;
      return;
    }

    if (diff < -0.04) {
      // swipe LEFT
      colorIndex = (colorIndex - 1 + colors.length) % colors.length;
      document.body.style.background = colors[colorIndex];
      lastX = null;
      return;
    }
  }

  lastX = x;
});

const camera = new Camera(video, {
  onFrame: async () => {
    await hands.send({ image: video });
  },
  width: 640,
  height: 480
});

camera.start();
</script>

</body>
</html>
